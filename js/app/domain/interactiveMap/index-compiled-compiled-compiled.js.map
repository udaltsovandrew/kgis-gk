{"version":3,"sources":["index-compiled-compiled.js"],"names":[],"mappings":"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","file":"index-compiled-compiled-compiled.js","sourcesContent":["/**\n * Created by udaltsov on 09.11.15.\n */\n\"use strict\";\n\ndefine([\"./js/app/dataAccess/model-compiled.js\"], function (model) {\n\n  var context = new model({ url: null, className: null, map: map });\n\n  //todo рефакторинг в самое ближайшее время\n  function updateTechnicalConnectionInfo() {\n    var substationSet = null;\n    var equipmentContainerSet = null;\n    var voltageLevelSet = null;\n    var measurementControlSet = null;\n    var substationMeasurementControlSet = null;\n    var powerTransformerSet = null;\n    var powerTransformerMeasurementControlSet = null;\n    var Substations = null;\n\n    db.Substation.get({ where: \"assetType = 'центр питания'\" }).then(function (data) {\n      substationSet = context.all(data);\n      var result = [];\n      for (var i = 0; i < substationSet.length; i++) {\n        var _substation = {\n          attributes: {\n            Id: substationSet[i].attributes[\"OBJECTID\"],\n            Name: substationSet[i].attributes[\"aliasName\"] + \" '\" + substationSet[i].attributes[\"localName\"] + \"'\"\n          },\n          geometry: substationSet[i].geometry\n        };\n        result.push(_substation);\n      }\n      Substations = result;\n\n      var substationIds = featuresToArray(data, \"OBJECTID\");\n      db.EquipmentContainer.get({ where: \"parentClassName='Substation' AND chieldClassName='VoltageLevel' AND (parentMRID in (\" + substationIds + \"))\" }).then(function (data) {\n        equipmentContainerSet = context.all(data);\n        var voltageLevelIds = featuresToArray(data, \"chieldMRID\");\n        return db.VoltageLevel.get({ where: \"OBJECTID in (\" + voltageLevelIds + \")\" });\n      }).then(function (data) {\n        voltageLevelSet = context.all(data);\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].voltageLevels = [];\n          for (var j = 0; j < equipmentContainerSet.length; j++) {\n            if (equipmentContainerSet[j].attributes[\"parentMRID\"] == substationId) {\n              var voltageLevelId = equipmentContainerSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < voltageLevelSet.length; k++) {\n                if (voltageLevelId == voltageLevelSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].voltageLevels.push(voltageLevelSet[k]);\n                }\n              }\n            }\n          }\n        }\n        console.log(Substations);\n        return db.MeasurementContainer.get({ where: \"chieldClassName = 'SubstationMeasurementControl' AND parentMRID in (\" + substationIds + \")\" });\n      }).then(function (data) {\n        measurementControlSet = context.all(data);\n        var substationMeasurementControlIds = featuresToArray(data, \"chieldMRID\");\n        return db.SubstationMeasurementControl.get({ where: \"OBJECTID in (\" + substationMeasurementControlIds + \")\" });\n      }).then(function (data) {\n        substationMeasurementControlSet = context.all(data);\n\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].substationMeasurementControls = [];\n          for (var j = 0; j < measurementControlSet.length; j++) {\n            if (measurementControlSet[j].attributes[\"parentMRID\"] == substationId) {\n              var substationMeasurementControlId = measurementControlSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < substationMeasurementControlSet.length; k++) {\n                if (substationMeasurementControlId == substationMeasurementControlSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].substationMeasurementControls.push(substationMeasurementControlSet[k]);\n                }\n              }\n            }\n          }\n        }\n        return db.EquipmentContainer.get({ where: \"parentClassName='Substation' AND chieldClassName='PowerTransformer' AND parentMRID in (\" + substationIds + \")\" });\n      }).then(function (data) {\n        var powerTransformerIds = featuresToArray(data, \"chieldMRID\");\n        equipmentContainerSet = context.all(data);\n        return db.PowerTransformer.get({ where: \"OBJECTID in (\" + powerTransformerIds + \")\" });\n      }).then(function (data) {\n        //add powerTransformers\n        powerTransformerSet = context.all(data);\n        var powerTransformerIds = featuresToArray(data, \"OBJECTID\");\n\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].powerTransformers = [];\n          for (var j = 0; j < equipmentContainerSet.length; j++) {\n            if (equipmentContainerSet[j].attributes[\"parentMRID\"] == substationId) {\n              var powerTransformerId = equipmentContainerSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < powerTransformerSet.length; k++) {\n                if (powerTransformerId == powerTransformerSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].powerTransformers.push(powerTransformerSet[k]);\n                }\n              }\n            }\n          }\n        }\n\n        console.log(Substations);\n        return db.MeasurementContainer.get({\n          where: \"parentClassName='PowerTransformer' \" + \"AND \" + \"chieldClassName='PowerTransformerMeasurementControl' \" + \"AND \" + \"parentMRID in (\" + powerTransformerIds + \")\"\n        });\n      }).then(function (data) {\n        measurementControlSet = context.all(data);\n        var powerTransformerMeasurementIds = featuresToArray(data, \"chieldMRID\");\n        return db.PowerTransformerMeasurementControl.get({ where: \"OBJECTID in (\" + powerTransformerMeasurementIds + \")\" });\n      }).then(function (data) {\n        powerTransformerMeasurementControlSet = context.all(data);\n        for (var i = 0; i < Substations.length; i++) {\n          Substations[i].powerTrasformerMeasurements = [];\n          var powerTransformers = Substations[i].powerTransformers;\n          for (var j = 0; j < powerTransformers.length; j++) {\n            var powerTransformerId = powerTransformers[j].attributes[\"OBJECTID\"];\n            for (var k = 0; k < measurementControlSet.length; k++) {\n              var innerPowerTransformerId = measurementControlSet[k].attributes[\"parentMRID\"];\n              var measurementId = measurementControlSet[k].attributes[\"chieldMRID\"];\n              if (powerTransformerId == innerPowerTransformerId) {\n                for (var z = 0; z < powerTransformerMeasurementControlSet.length; z++) {\n                  if (measurementId == powerTransformerMeasurementControlSet[z].attributes[\"OBJECTID\"]) {\n                    Substations[i].powerTrasformerMeasurements.push(powerTransformerMeasurementControlSet[z]);\n                  }\n                }\n              }\n            }\n          }\n        }\n        console.log(Substations);\n\n        transformSubstationToFeatures(Substations);\n\n        function transformSubstationToFeatures(substationList) {\n          var features = [];\n          for (var i = 0; i < substationList.length; i++) {\n            var substation = substationList[i];\n            substation.attributes[\"Class\"] = _getSubstationClass(substationList[i].voltageLevels);\n            substation.attributes[\"Voltage\"] = _getSubstationMaxVoltage(substationList[i].voltageLevels);\n            substation.attributes[\"Renovation\"] = _getSubstationRenovation(substationList[i].substationMeasurementControls);\n            substation.attributes[\"Power\"] = _getSubstationPower(substationList[i].substationMeasurementControls);\n            substation.attributes[\"Status\"] = _getSubstationStatus(substationList[i].powerTransformers, substationList[i].powerTrasformerMeasurements);\n            features.push(substation);\n          }\n\n          db.SubstationEnergyCenter.addArray(features).then(function (data) {\n            console.log(data);\n          });\n        }\n      });\n    });\n  }\n\n  //todo рефакторинг в самое ближайшее время\n  function getSubstationEnergyCenterReport(substId) {\n    var substationSet = null;\n    var equipmentContainerSet = null;\n    var voltageLevelSet = null;\n    var measurementControlSet = null;\n    var substationMeasurementControlSet = null;\n    var powerTransformerSet = null;\n    var powerTransformerMeasurementControlSet = null;\n    var Substations = null;\n\n    return db.Substation.get({ where: \"assetType = 'центр питания' AND OBJECTID=\" + substId }).then(function (data) {\n\n      substationSet = context.all(data);\n\n      var result = [];\n      for (var i = 0; i < substationSet.length; i++) {\n        var _substation = {\n          attributes: {\n            Id: substationSet[i].attributes[\"OBJECTID\"],\n            Name: substationSet[i].attributes[\"aliasName\"] + \" '\" + substationSet[i].attributes[\"localName\"] + \"'\"\n          },\n          geometry: substationSet[i].geometry\n        };\n        result.push(_substation);\n      }\n      Substations = result;\n\n      var substationIds = featuresToArray(data, \"OBJECTID\");\n      db.EquipmentContainer.get({ where: \"parentClassName='Substation' AND chieldClassName='VoltageLevel' AND (parentMRID in (\" + substationIds + \"))\" }).then(function (data) {\n        equipmentContainerSet = context.all(data);\n        var voltageLevelIds = featuresToArray(data, \"chieldMRID\");\n        return db.VoltageLevel.get({ where: \"OBJECTID in (\" + voltageLevelIds + \")\" });\n      }).then(function (data) {\n        voltageLevelSet = context.all(data);\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].voltageLevels = [];\n          for (var j = 0; j < equipmentContainerSet.length; j++) {\n            if (equipmentContainerSet[j].attributes[\"parentMRID\"] == substationId) {\n              var voltageLevelId = equipmentContainerSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < voltageLevelSet.length; k++) {\n                if (voltageLevelId == voltageLevelSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].voltageLevels.push(voltageLevelSet[k]);\n                }\n              }\n            }\n          }\n        }\n        console.log(Substations);\n        return db.MeasurementContainer.get({ where: \"chieldClassName = 'SubstationMeasurementControl' AND parentMRID in (\" + substationIds + \")\" });\n      }).then(function (data) {\n        measurementControlSet = context.all(data);\n        var substationMeasurementControlIds = featuresToArray(data, \"chieldMRID\");\n        return db.SubstationMeasurementControl.get({ where: \"OBJECTID in (\" + substationMeasurementControlIds + \")\" });\n      }).then(function (data) {\n        substationMeasurementControlSet = context.all(data);\n\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].substationMeasurementControls = [];\n          for (var j = 0; j < measurementControlSet.length; j++) {\n            if (measurementControlSet[j].attributes[\"parentMRID\"] == substationId) {\n              var substationMeasurementControlId = measurementControlSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < substationMeasurementControlSet.length; k++) {\n                if (substationMeasurementControlId == substationMeasurementControlSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].substationMeasurementControls.push(substationMeasurementControlSet[k]);\n                }\n              }\n            }\n          }\n        }\n        return db.EquipmentContainer.get({ where: \"parentClassName='Substation' AND chieldClassName='PowerTransformer' AND parentMRID in (\" + substationIds + \")\" });\n      }).then(function (data) {\n        var powerTransformerIds = featuresToArray(data, \"chieldMRID\");\n        equipmentContainerSet = context.all(data);\n        return db.PowerTransformer.get({ where: \"OBJECTID in (\" + powerTransformerIds + \")\" });\n      }).then(function (data) {\n        //add powerTransformers\n        powerTransformerSet = context.all(data);\n        var powerTransformerIds = featuresToArray(data, \"OBJECTID\");\n\n        for (var i = 0; i < Substations.length; i++) {\n          var substationId = Substations[i].attributes[\"Id\"];\n          Substations[i].powerTransformers = [];\n          for (var j = 0; j < equipmentContainerSet.length; j++) {\n            if (equipmentContainerSet[j].attributes[\"parentMRID\"] == substationId) {\n              var powerTransformerId = equipmentContainerSet[j].attributes[\"chieldMRID\"];\n              for (var k = 0; k < powerTransformerSet.length; k++) {\n                if (powerTransformerId == powerTransformerSet[k].attributes[\"OBJECTID\"]) {\n                  Substations[i].powerTransformers.push(powerTransformerSet[k]);\n                }\n              }\n            }\n          }\n        }\n\n        return db.MeasurementContainer.get({\n          where: \"parentClassName='PowerTransformer' \" + \"AND \" + \"chieldClassName='PowerTransformerMeasurementControl' \" + \"AND \" + \"parentMRID in (\" + powerTransformerIds + \")\"\n        });\n      }).then(function (data) {\n        measurementControlSet = context.all(data);\n        var powerTransformerMeasurementIds = featuresToArray(data, \"chieldMRID\");\n        return db.PowerTransformerMeasurementControl.get({ where: \"OBJECTID in (\" + powerTransformerMeasurementIds + \")\" });\n      }).then(function (data) {\n        powerTransformerMeasurementControlSet = context.all(data);\n\n        for (var i = 0; i < Substations.length; i++) {\n          Substations[i].powerTrasformerMeasurements = [];\n          var powerTransformers = Substations[i].powerTransformers;\n          for (var j = 0; j < powerTransformers.length; j++) {\n            var powerTransformerId = powerTransformers[j].attributes[\"OBJECTID\"];\n            for (var k = 0; k < measurementControlSet.length; k++) {\n              var innerPowerTransformerId = measurementControlSet[k].attributes[\"parentMRID\"];\n              var measurementId = measurementControlSet[k].attributes[\"chieldMRID\"];\n              if (powerTransformerId == innerPowerTransformerId) {\n                for (var z = 0; z < powerTransformerMeasurementControlSet.length; z++) {\n                  if (measurementId == powerTransformerMeasurementControlSet[z].attributes[\"OBJECTID\"]) {\n                    powerTransformerMeasurementControlSet[z].attributes[\"aliasName\"] = powerTransformers[j].attributes[\"aliasName\"];\n                    Substations[i].powerTrasformerMeasurements.push(powerTransformerMeasurementControlSet[z]);\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        generateReport(Substations);\n      });\n    });\n  }\n\n  function generateReport(substationList) {\n    var features = [];\n    for (var i = 0; i < substationList.length; i++) {\n      var substation = substationList[i];\n      substation.attributes[\"Class\"] = _getSubstationClass(substationList[i].voltageLevels);\n      substation.attributes[\"Voltage\"] = _getSubstationMaxVoltage(substationList[i].voltageLevels);\n      substation.attributes[\"Renovation\"] = _getSubstationRenovation(substationList[i].substationMeasurementControls);\n      substation.attributes[\"Power\"] = _getSubstationPower(substationList[i].substationMeasurementControls);\n      substation.attributes[\"Status\"] = _getSubstationStatus(substationList[i].powerTransformers, substationList[i].powerTrasformerMeasurements);\n      features.push(substation);\n    }\n\n    var item = features[0];\n    $(\"#substationName\")[0].innerHTML = item.attributes[\"Name\"];\n    $(\"#substationClass\")[0].innerHTML = item.attributes[\"Class\"];\n    for (var i = 0; i < item.powerTransformers.length; i++) {\n      $(\"#powerTransformer-list\")[0].innerHTML += \"<div>\" + item.powerTransformers[i].attributes[\"aliasName\"] + \" : \" + item.powerTransformers[i].attributes[\"powerRating\"];\n    }\n\n    for (var i = 0; i < item.powerTransformers.length; i++) {\n      $(\"#powerTransformerReconstruction-list\")[0].innerHTML += \"<div>\" + item.powerTransformers[i].attributes[\"aliasName\"] + \" : \" + item.powerTransformers[i].attributes[\"altPowerRating\"];\n    }\n\n    $(\"#powerReserve\")[0].innerHTML = item.attributes[\"Power\"];\n    $(\"#powerContracts\")[0].innerHTML = item.substationMeasurementControls[0].attributes[\"loadForecastContracts\"];\n    $(\"#powerClaims\")[0].innerHTML = item.substationMeasurementControls[0].attributes[\"loadForecastClaims\"];\n\n    if (item.attributes[\"Renovation\"] > 0) {\n      $(\"#reconstruction-header\").show();\n      $(\"#powerTransformerReconstruction-list\").show();\n      for (var i = 0; i < item.powerTrasformerMeasurements.length; i++) {\n        $(\"#powerTransformerLoad-list\")[0].innerHTML += \"<div>\" + item.powerTrasformerMeasurements[i].attributes[\"aliasName\"] + \" : \" + item.powerTrasformerMeasurements[i].attributes[\"loadModeNormal\"];\n      }\n    }\n  }\n\n  function _getSubstationStatus(_ptSet, _measurements) {\n    var measurements = featuresPropertyToArray(_measurements, \"loadModeNormal\");\n    var powerTransformers = featuresPropertyToArray(_ptSet, \"powerRating\");\n    var sumMeasurements = 0;\n    var minPTNominalPower = Infinity;\n    for (var j = 0; j < measurements.length; j++) sumMeasurements += Number(measurements[j]);\n    for (var k = 0; k < powerTransformers.length; k++) {\n      var powerRating = Number(powerTransformers[k]);\n      if (minPTNominalPower > powerRating && powerRating != 0) {\n        minPTNominalPower = Number(powerTransformers[k]);\n      }\n    }\n    var relation = sumMeasurements / (1.05 * minPTNominalPower);\n    if (relation < 0.75) return 1;\n    if (relation >= 0.75 && relation < 1.05) return 2;\n    if (relation >= 1.05) return 3;\n  }\n\n  function _getSubstationClass(voltageLevels) {\n    var voltageLevelList = [];\n    for (var j = 0; j < voltageLevels.length; j++) {\n      voltageLevelList.push(voltageLevels[j].attributes[\"nominalVoltage\"]);\n    }\n    voltageLevelList = voltageLevelList.sort(function (a, b) {\n      return a <= b;\n    });\n    voltageLevelList = voltageLevelList.join(\"/\");\n    return voltageLevelList;\n  }\n\n  function _getSubstationMaxVoltage(voltageLevels) {\n    var voltageLevelList = [];\n    for (var j = 0; j < voltageLevels.length; j++) {\n      voltageLevelList.push(Number(voltageLevels[j].attributes[\"nominalVoltage\"]));\n    }\n    return Math.max.apply(null, voltageLevelList);\n  }\n\n  function _getSubstationRenovation(measurementControls) {\n    for (var j = 0; j < measurementControls.length; j++) {\n      if (measurementControls[j].attributes[\"powerInputYear\"] > 0) {\n        return 1;\n      }\n    }\n    return 0;\n  }\n\n  function _getSubstationPower(measurementControls) {\n    for (var j = 0; j < measurementControls.length; j++) {\n      if (measurementControls[j].attributes[\"powerReserve1N105\"] > 0) {\n        return measurementControls[j].attributes[\"powerReserve1N105\"];\n      }\n    }\n    return NaN;\n  }\n\n  return {\n    updateTechnicalConnectionInfo: updateTechnicalConnectionInfo,\n    getSubstationEnergyCenterReport: getSubstationEnergyCenterReport\n  };\n});\n\n//# sourceMappingURL=index-compiled.js.map\n\n//# sourceMappingURL=index-compiled-compiled.js.map"]}