{"version":3,"sources":["geometryView-compiled.js"],"names":[],"mappings":"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","file":"geometryView-compiled-compiled.js","sourcesContent":["/**\r\n * Created by ryazanova.ea on 02.09.2016.\r\n */\ndefine([\"./js/app/domain/carto-compiled.js\", \"./js/app/forms/forms-compiled.js\", \"esri/geometry/geometryEngine\"], function (carto, forms, geometryEngine) {\n\n    function loadGeometryProperty(data, id) {\n        console.log(\"для меня\", data);\n        var typeObject = data.geometry.type;\n        switch (typeObject) {\n            case \"point\":\n                var x = data.geometry.x;\n                var y = data.geometry.y;\n                document.getElementById(id).innerHTML = \"\";\n                document.getElementById(id).innerHTML = \"<div class='buttons-menu'>\" + \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .GEOJSON\" + \"</div>\" + \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .KML\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-1 styleTextPropertyGeometry'>\" + \"Тип:\" + \"</div>\" + \"<div class='col-md-1'>\" + \"Точка\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class ='col-md-5 col-md-push-2'>\" + \"<h5>\" + \"Координаты\" + \"</h5>\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div id ='tableCoords' class='styleTableCoords'>\" + \"</div>\" + \"</div>\";\n\n                var geoJson = \"Substation-Geometry-geoJson\";\n                bindClick(geoJson, function () {\n                    var geometry = carto.featureToGeoJson(data);\n                    console.log(\"123\", geometry);\n                    var blob = new Blob([JSON.stringify(geometry)], { type: \"text/plain;charset=utf-8\" });\n                    saveAs(blob, \"property.json\");\n                });\n                var kml = \"Substation-Geometry-KML\";\n                bindClick(kml, function () {\n                    var geometry = carto.featureToGeoJson(data);\n                    var kmlFile = tokml(geometry);\n                    var blob = new Blob([kmlFile.toString()], { type: \"text/plain;charset=utf-8\" });\n                    saveAs(blob, \"google.kml\");\n                });\n                $(\"#tableCoords\").kendoGrid({\n                    autoBind: true,\n                    columns: [{ field: \"x\", title: \"X\" }, { field: \"y\", title: \"Y\" }],\n                    dataSource: [{ x: x, y: y }],\n                    noRecords: {\n                        template: \"Нет данных\"\n                    },\n                    scrollable: false,\n                    resizable: true,\n                    sortable: true,\n                    filterable: false,\n                    toolbar: [{ name: \"excel\", text: \"Экспорт в *.xls\" }],\n                    excel: {\n                        fileName: \"Реестр координат \" + carto.featureToGeoJson(data).properties.aliasName + \".xlsx\"\n                    }\n                });\n                break;\n            case \"polyline\":\n                document.getElementById(id).innerHTML = \"\";\n                var datasource_1 = [];\n                for (var i = 0; i < data.geometry.paths.length; i++) {\n                    for (var j = 0; j < data.geometry.paths[i].length; j++) {\n                        var point = carto.getNPointInLineInPath(data.geometry, i, j);\n                        datasource_1[j] = {\n                            x: point.x.toFixed(5),\n                            y: point.y.toFixed(5)\n                        };\n                    }\n                }\n\n                var length = geometryEngine.geodesicLength(data.geometry, 9036);\n                document.getElementById(id).innerHTML = \"<div class='buttons-menu'>\" + \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .GEOJSON\" + \"</div>\" + \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .KML\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-3 styleTextPropertyGeometry'>\" + \"Тип:\" + \"</div>\" + \"<div class='col-md-3'>\" + \"Линия\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-3 styleTextPropertyGeometry'>\" + \"Длина\" + \"</div>\" + \"<div class='col-md-1'>\" + length.toFixed(2) + \"</div>\" + \"<div class='col-md-1'>\" + \"км\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class ='col-md-5 col-md-push-2'>\" + \"<h5>\" + \"Координаты\" + \"</h5>\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div id ='tableCoords' class='styleTableCoords'>\" + \"</div>\" + \"</div>\";\n                var geoJson = \"Substation-Geometry-geoJson\";\n                bindClick(geoJson, function () {\n                    var geometry = carto.featureToGeoJson(data);\n                    console.log(\"123\", geometry);\n                    var blob = new Blob([JSON.stringify(geometry)], { type: \"text/plain;charset=utf-8\" });\n                    saveAs(blob, \"property.json\");\n                });\n                var kml = \"Substation-Geometry-KML\";\n                bindClick(kml, function () {\n                    var geometry = carto.featureToGeoJson(data);\n                    console.log(\"название\", geometry);\n                    var kmlFile = tokml(geometry);\n                    var blob = new Blob([kmlFile.toString()], { type: \"text/plain;charset=utf-8\" });\n                    saveAs(blob, \"google.kml\");\n                });\n                $(\"#tableCoords\").kendoGrid({\n                    autoBind: true,\n                    columns: [{ field: \"x\", title: \"X\" }, { field: \"y\", title: \"Y\" }],\n                    dataSource: datasource_1,\n                    noRecords: {\n                        template: \"Нет данных\"\n                    },\n                    scrollable: false,\n                    resizable: true,\n                    sortable: true,\n                    filterable: false,\n                    toolbar: [{ name: \"excel\", text: \"Экспорт в *.xls\" }],\n                    excel: {\n                        fileName: \"Реестр координат \" + carto.featureToGeoJson(data).properties.aliasName + \".xlsx\"\n                    }\n                });\n                break;\n            case \"polygon\":\n                document.getElementById(id).innerHTML = \"<div class='buttons-menu'>\" + \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .GEOJSON\" + \"</div>\" + \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" + \"<span class='glyphicon glyphicon-save'>\" + \" .KML\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-1'>\" + \"Тип:\" + \"</div>\" + \"<div class='col-md-1'>\" + \"Площадной объект\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class ='col-md-1'>\" + \"Координаты\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-4'>\" + \"X\" + \"</div>\" + \"<div class='col-md-4'>\" + \"Y\" + \"</div>\" + \"</div>\" + \"<div class='row'>\" + \"<div class='col-md-4'>\" + \"\" + \"</div>\" + \"<div class='col-md-4'>\" + \"\" + \"</div>\" + \"</div>\";\n                break;\n        }\n    }\n\n    return {\n        loadGeometryProperty: loadGeometryProperty\n    };\n});\n\n//# sourceMappingURL=geometryView-compiled.js.map"]}