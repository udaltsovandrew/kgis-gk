{"version":3,"sources":["projects-compiled.js"],"names":[],"mappings":"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","file":"projects-compiled-compiled.js","sourcesContent":["function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * Created by lomteva.aa on 23.08.2016.\n */\n/**\n * Created by lomteva.aa on 23.08.2016.\n */\ndefine([\"./js/app/forms/forms-compiled.js\", \"./js/app/dataAccess/model-compiled.js\"], function (forms, model) {\n  let initProjectClassNameTab = (() => {\n    var ref = _asyncToGenerator(function* (feature, className) {\n      var id = feature.attributes.OBJECTID;\n      var tableName = \"Project-\" + className + \"-List\";\n\n      bindClick(\"linkProject\" + className, _asyncToGenerator(function* () {\n        var editor = _getEditorLayer(className);\n        //noinspection JSUnresolvedFunction\n        var candidates = editor.getSelectedFeatures();\n        var ids = candidates.map(function (item) {\n          return item.attributes.OBJECTID;\n        });\n        var containers = ids.map(function (childId) {\n          return {\n            geometry: feature.geometry,\n            attributes: {\n              parentMRID: id,\n              parentClassName: \"Project\",\n              chieldClassName: className,\n              chieldMRID: childId\n            }\n          };\n        });\n        var action = yield db.PsrIdObjectRole.addArray(containers);\n        if (action) {\n          initProjectClassNameTab(feature, className);\n        }\n      }));\n\n      bindClick(\"relinkProject\" + className, _asyncToGenerator(function* () {\n        var ids = forms.getObjectIDS(tableName);\n        var chieldIds = \"chieldMRID=\" + ids.join(\" OR chieldMRID=\");\n        var where = \"parentMRID=\" + id + \" AND parentClassName='Project' AND chieldClassName='\" + className + \"' AND (\" + chieldIds + \")\";\n        var containers = yield db.PsrIdObjectRole.get({ where: where });\n        containers = context.all(containers);\n        ids = containers.map(function (item) {\n          return item.attributes.OBJECTID;\n        });\n        var action = yield db.PsrIdObjectRole.delByArray(ids);\n        if (action) {\n          forms.removeSelectedRows(tableName);\n        }\n      }));\n\n      var where = \"parentClassName='Project' AND chieldClassName='\" + className + \"' AND parentMRID=\" + id;\n      var data = yield db.PsrIdObjectRole.get({ where: where });\n      var features = context.all(data);\n      var ids = features.map(function (item) {\n        return item.attributes.chieldMRID;\n      });\n      where = \"OBJECTID=\" + ids.join(\" OR OBJECTID=\");\n      data = yield db[className].get({ where: where });\n      features = context.all(data);\n      forms.createTable(tableName, features, className);\n    });\n\n    return function initProjectClassNameTab(_x, _x2) {\n      return ref.apply(this, arguments);\n    };\n  })();\n\n  let showNetworkProjects = (() => {\n    var ref = _asyncToGenerator(function* () {\n      const windowName = \"project-container\";\n      const tableName = \"Project-List\";\n      forms.toWindow(windowName, \"Проекты развития сети\");\n      forms.showWindow(windowName);\n\n      bindClick(\"addProject\", _asyncToGenerator(function* () {\n        var protoFeature = generators.Project.default;\n        protoFeature.geometry = carto.getGpxPoint();\n        protoFeature.attributes.subject = userAccount.userName;\n        //protoFeature.attributes.createdDateTime =;\n        var data = yield db.Project.add(protoFeature);\n        var id = data[0][0].objectId;\n        data = yield db.Project.getById(id);\n        var feature = context.first(data);\n        forms.appendRowInTable(tableName, feature.attributes);\n      }));\n\n      bindClick(\"editProject\", _asyncToGenerator(function* () {\n        var objectId = forms.getObjectID(tableName);\n        var data = yield db.Project.getById(objectId);\n        var feature = context.first(data);\n        forms.open(\"Project\", feature);\n        initProjectClassNameTab(feature, \"CustomerOrganisation\");\n        initProjectClassNameTab(feature, \"CustomerErpPerson\");\n        initProjectClassNameTab(feature, \"PowerLine\");\n        initProjectClassNameTab(feature, \"Substation\");\n      }));\n\n      bindClick(\"deleteProject\", _asyncToGenerator(function* () {\n        var ids = forms.getObjectIDS(tableName);\n        forms.removeSelectedRows(tableName);\n        for (var i = 0; i < ids.length; i++) {\n          db.Project.delById(ids[i]);\n        }\n      }));\n\n      bindClick(\"showProject\", _asyncToGenerator(function* () {\n        var id = forms.getObjectID(tableName);\n        var classes = [\"Substation\", \"PowerLine\", \"CustomerOrganisation\", \"CustomerErpPerson\"];\n        classes.forEach((() => {\n          var ref = _asyncToGenerator(function* (classItem) {\n            var where = \"parentClassName='Project' AND chieldClassName='\" + classItem + \"' AND parentMRID=\" + id;\n            var data = yield db.PsrIdObjectRole.get({ where: where });\n            var features = context.all(data);\n            var ids = features.map(function (item) {\n              return item.attributes.chieldMRID;\n            });\n            where = \"OBJECTID=\" + ids.join(\" OR OBJECTID=\");\n            var editor = _getEditorLayer(classItem);\n            editor.setDefinitionExpression(where);\n            editor.refresh();\n          });\n\n          return function (_x3) {\n            return ref.apply(this, arguments);\n          };\n        })());\n      }));\n\n      bindClick(\"clearProject\", _asyncToGenerator(function* () {\n        var classes = [\"Substation\", \"PowerLine\", \"CustomerOrganisation\", \"CustomerErpPerson\"];\n        classes.forEach((() => {\n          var ref = _asyncToGenerator(function* (classItem) {\n            var editor = _getEditorLayer(classItem);\n            /** @namespace editor.defaultDefinitionExpression */\n            editor.setDefinitionExpression(editor.defaultDefinitionExpression);\n            editor.refresh();\n          });\n\n          return function (_x4) {\n            return ref.apply(this, arguments);\n          };\n        })());\n      }));\n\n      bindClick(\"exportProject\", _asyncToGenerator(function* () {\n        var id = forms.getObjectID(tableName);\n        var classes = [\"Substation\", \"PowerLine\", \"CustomerOrganisation\", \"CustomerErpPerson\"];\n        var types = {\n          \"Substation\": \"esriGeometryPoint\",\n          \"PowerLine\": \"esriGeometryPolyline\",\n          \"CustomerErpPerson\": \"esriGeometryPoint\",\n          \"CustomerOrganisation\": \"esriGeometryPoint\"\n        };\n        var _result = [];\n        for (var i = 0; i < classes.length; i++) {\n          var items = yield getChields(id, \"Project\", classes[i], \"PsrIdObjectRole\");\n          items = _convertFeatures(items, classes[i], types[classes[i]]);\n          for (var j = 0; j < items.length; j++) _result.push(JSON.stringify(items[j]));\n        }\n\n        return httpUtils.POST(\"http://localhost:3000/exportDxf\", {\n          data: _result\n        }).then(function (data) {\n          var fileName = \"file://\" + JSON.parse(data)[\"fileInfo\"];\n          forms.toWindow(\"fileDownload\", \"Скачивание файла\");\n          var element = $(\"#fileDownload-content\")[0];\n          element.innerHTML = \"\";\n          element.innerHTML += \"\" + \"<div class='container'>\" + \"<div class='text-default'>\" + \"Файл проекта, содержащий исходные данные для выполнения ПИР\" + \"</div>\" + \"<br>\" + \"<a class='btn btn-default' href='\" + fileName + \"'>\" + \"<span class='glyphicon glyphicon-cloud-download'></span>\" + \" Скачать\" + \"</a>\" + \"<br>\" + \"<hr>\" + \"<div class='text-default'>\" + \"Если не удается загрузить файл, используйте прямой путь\" + \"<br>\" + \"<div class='text-success'>\" + \"\" + fileName + \"\" + \"</div>\" + \"</div>\" + \"</div>\";\n          forms.showWindow(\"fileDownload\");\n        });\n      }));\n\n      var data = yield db.Project.get({ where: \"1=1\" });\n      var features = context.all(data);\n      forms.createTable(tableName, features, \"Project\");\n    });\n\n    return function showNetworkProjects() {\n      return ref.apply(this, arguments);\n    };\n  })();\n\n  var context = new model({ url: \"\", className: \"context\", map: map });\n\n  function _convertFeatures(data, layerName, geometryType) {\n    var features = data;\n    features = features.map(function (item) {\n      return {\n        attributes: item.attributes,\n        geometry: item.geometry,\n        layer: layerName,\n        geometryType: geometryType\n      };\n    });\n    return features;\n  }\n\n  return {\n    initProjectClassNameTab: initProjectClassNameTab,\n    showNetworkProjects: showNetworkProjects\n  };\n});\n\n//# sourceMappingURL=projects-compiled.js.map"]}