{"version":3,"sources":["geometryView.js"],"names":[],"mappings":"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","file":"geometryView-compiled.js","sourcesContent":["/**\r\n * Created by ryazanova.ea on 02.09.2016.\r\n */\r\ndefine([\r\n        \"./js/app/domain/carto-compiled.js\",\r\n        \"./js/app/forms/forms-compiled.js\",\r\n        \"esri/geometry/geometryEngine\"\r\n    ],\r\n    function (carto,\r\n              forms,\r\n              geometryEngine) {\r\n\r\n        function loadGeometryProperty(data, id) {\r\n            console.log(\"для меня\", data)\r\n            var typeObject = data.geometry.type\r\n            switch (typeObject) {\r\n                case \"point\":\r\n                    var x = data.geometry.x;\r\n                    var y = data.geometry.y;\r\n                    document.getElementById(id).innerHTML = \"\";\r\n                    document.getElementById(id).innerHTML =\r\n                        \"<div class='buttons-menu'>\" +\r\n                        \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .GEOJSON\" +\r\n                        \"</div>\" +\r\n                        \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .KML\" +\r\n                        \"</div>\" +\r\n                        \"</div>\" +\r\n                        \"<div class='row'>\"\r\n                        + \"<div class='col-md-1 styleTextPropertyGeometry'>\" + \"Тип:\" + \"</div>\"\r\n                        + \"<div class='col-md-1'>\" + \"Точка\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\"\r\n                        + \"<div class ='col-md-5 col-md-push-2'>\" + \"<h5>\" + \"Координаты\" + \"</h5>\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\" +\r\n                        \"<div id ='tableCoords' class='styleTableCoords'>\" + \"</div>\"\r\n                        + \"</div>\";\r\n\r\n                    var geoJson = \"Substation-Geometry-geoJson\";\r\n                    bindClick(geoJson, function () {\r\n                        var geometry = carto.featureToGeoJson(data);\r\n                        console.log(\"123\", geometry);\r\n                        var blob = new Blob([JSON.stringify(geometry)], {type: \"text/plain;charset=utf-8\"});\r\n                        saveAs(blob, \"property.json\");\r\n                    });\r\n                    var kml = \"Substation-Geometry-KML\";\r\n                    bindClick(kml, function () {\r\n                        var geometry = carto.featureToGeoJson(data);\r\n                        var kmlFile = tokml(geometry);\r\n                        var blob = new Blob([kmlFile.toString()], {type: \"text/plain;charset=utf-8\"});\r\n                        saveAs(blob, \"google.kml\");\r\n                    });\r\n                    $(\"#tableCoords\").kendoGrid({\r\n                        autoBind: true,\r\n                        columns: [\r\n                            {field: \"x\", title: \"X\"},\r\n                            {field: \"y\", title: \"Y\"}\r\n                        ],\r\n                        dataSource: [\r\n                            {x:x, y:y}\r\n                        ],\r\n                        noRecords: {\r\n                            template: \"Нет данных\"\r\n                        },\r\n                        scrollable: false,\r\n                        resizable: true,\r\n                        sortable: true,\r\n                        filterable: false,\r\n                        toolbar: [\r\n                            {name: \"excel\", text: \"Экспорт в *.xls\"}\r\n                        ],\r\n                        excel: {\r\n                            fileName: \"Реестр координат \" + carto.featureToGeoJson(data).properties.aliasName + \".xlsx\"\r\n                        }\r\n                    });\r\n                    break;\r\n                case \"polyline\":\r\n                    document.getElementById(id).innerHTML = \"\";\r\n                    var datasource_1 = [];\r\n                    for (var i = 0; i < data.geometry.paths.length; i++) {\r\n                        for (var j = 0; j < data.geometry.paths[i].length; j++) {\r\n                            var point = carto.getNPointInLineInPath(data.geometry, i, j);\r\n                            datasource_1[j] = {\r\n                                x: point.x.toFixed(5),\r\n                                y: point.y.toFixed(5)\r\n                            };\r\n                        }\r\n                    }\r\n\r\n                    var length = geometryEngine.geodesicLength(data.geometry, 9036);\r\n                    document.getElementById(id).innerHTML =\r\n                        \"<div class='buttons-menu'>\" +\r\n                        \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .GEOJSON\" +\r\n                        \"</div>\" +\r\n                        \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .KML\" +\r\n                        \"</div>\" +\r\n                        \"</div>\" +\r\n                        \"<div class='row'>\"\r\n                        + \"<div class='col-md-3 styleTextPropertyGeometry'>\" + \"Тип:\" +\"</div>\"\r\n                        + \"<div class='col-md-3'>\" + \"Линия\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\"\r\n                        + \"<div class='col-md-3 styleTextPropertyGeometry'>\" + \"Длина\" +\"</div>\"\r\n                        + \"<div class='col-md-1'>\" + length.toFixed(2) + \"</div>\"\r\n                        + \"<div class='col-md-1'>\" + \"км\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\"\r\n                        + \"<div class ='col-md-5 col-md-push-2'>\" + \"<h5>\" + \"Координаты\" + \"</h5>\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\" +\r\n                        \"<div id ='tableCoords' class='styleTableCoords'>\" + \"</div>\"\r\n                        + \"</div>\";\r\n                    var geoJson = \"Substation-Geometry-geoJson\";\r\n                    bindClick(geoJson, function () {\r\n                        var geometry = carto.featureToGeoJson(data);\r\n                        console.log(\"123\", geometry);\r\n                        var blob = new Blob([JSON.stringify(geometry)], {type: \"text/plain;charset=utf-8\"});\r\n                        saveAs(blob, \"property.json\");\r\n                    });\r\n                    var kml = \"Substation-Geometry-KML\";\r\n                    bindClick(kml, function () {\r\n                        var geometry = carto.featureToGeoJson(data);\r\n                        console.log(\"название\", geometry);\r\n                        var kmlFile = tokml(geometry);\r\n                        var blob = new Blob([kmlFile.toString()], {type: \"text/plain;charset=utf-8\"});\r\n                        saveAs(blob, \"google.kml\");\r\n                    });\r\n                    $(\"#tableCoords\").kendoGrid({\r\n                        autoBind: true,\r\n                        columns: [\r\n\r\n                            {field: \"x\", title: \"X\"},\r\n                            {field: \"y\", title: \"Y\"}\r\n\r\n                        ],\r\n                        dataSource: datasource_1,\r\n                        noRecords: {\r\n                            template: \"Нет данных\"\r\n                        },\r\n                        scrollable: false,\r\n                        resizable: true,\r\n                        sortable: true,\r\n                        filterable: false,\r\n                        toolbar: [\r\n                            {name: \"excel\", text: \"Экспорт в *.xls\"}\r\n                        ],\r\n                        excel: {\r\n                            fileName: \"Реестр координат \" + carto.featureToGeoJson(data).properties.aliasName + \".xlsx\"\r\n                        }\r\n                    });\r\n                    break;\r\n                case \"polygon\":\r\n                    document.getElementById(id).innerHTML =\r\n                        \"<div class='buttons-menu'>\" +\r\n                        \"<div id='Substation-Geometry-geoJson' class='btn btn-success'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .GEOJSON\" +\r\n                        \"</div>\" +\r\n                        \"<div id='Substation-Geometry-KML' class='btn btn-primary btnKMLGeometry'>\" +\r\n                        \"<span class='glyphicon glyphicon-save'>\" +\r\n                        \" .KML\" +\r\n                        \"</div>\" +\r\n                        \"</div>\" +\r\n                        \"<div class='row'>\"\r\n                        + \"<div class='col-md-1'>\" + \"Тип:\" + \"</div>\"\r\n                        + \"<div class='col-md-1'>\" + \"Площадной объект\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\"\r\n                        + \"<div class ='col-md-1'>\" + \"Координаты\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\" +\r\n                        \"<div class='col-md-4'>\" + \"X\" + \"</div>\"\r\n                        + \"<div class='col-md-4'>\" + \"Y\" + \"</div>\"\r\n                        + \"</div>\"\r\n                        + \"<div class='row'>\"\r\n                        + \"<div class='col-md-4'>\" + \"\" + \"</div>\"\r\n                        + \"<div class='col-md-4'>\" + \"\" + \"</div>\"\r\n                        + \"</div>\";\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n\r\n        return {\r\n            loadGeometryProperty: loadGeometryProperty\r\n        };\r\n    });"]}