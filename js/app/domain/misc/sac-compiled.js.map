{"version":3,"sources":["sac.js"],"names":[],"mappings":";;;;;AAGA,OAAO,CACL,kCADK,EAEL,uCAFK,EAGL,kCAHK,EAIL,wBAJK,EAKL,wCALK,EAML,mCANK,CAAP,EAOG,UAAU,KAAV,EACU,KADV,EAEU,SAFV,EAGU,QAHV,EAIU,UAJV,EAKU,KALV,EAKiB;;gCAIlB,aAA6C;AAC3C,YAAM,aAAa,2BAAb,CADqC;AAE3C,YAAM,YAAY,cAAZ,CAFqC;AAG3C,YAAM,QAAN,CAAe,UAAf,EAA2B,cAA3B,EAH2C;AAI3C,YAAM,UAAN,CAAiB,UAAjB,EAJ2C;;AAQ3C,gBAAU,YAAV,oBAAwB,aAAkB;AACxC,YAAI,eAAe,WAAW,OAAX,CAAmB,OAAnB,CADqB;AAExC,qBAAa,QAAb,GAAwB,MAAM,WAAN,EAAxB,CAFwC;AAGxC,qBAAa,UAAb,CAAwB,OAAxB,GAAkC,YAAY,QAAZ;;AAHM,YAKpC,OAAO,MAAO,GAAG,OAAH,CAAW,GAAX,CAAe,YAAf,CAAP,CAL6B;AAMxC,YAAI,KAAK,KAAK,CAAL,EAAQ,CAAR,EAAW,QAAX,CAN+B;AAOxC,eAAO,MAAO,GAAG,OAAH,CAAW,OAAX,CAAmB,EAAnB,CAAP,CAPiC;AAQxC,YAAI,UAAU,QAAQ,KAAR,CAAc,IAAd,CAAV,CARoC;AASxC,cAAM,gBAAN,CAAuB,SAAvB,EAAkC,QAAQ,UAAR,CAAlC,CATwC;OAAlB,CAAxB,EAR2C;;AAoB3C,gBAAU,aAAV,oBAAyB,aAAkB;AACzC,YAAI,WAAW,MAAM,WAAN,CAAkB,SAAlB,CAAX,CADqC;AAEzC,YAAI,OAAO,MAAO,GAAG,OAAH,CAAW,OAAX,CAAmB,QAAnB,CAAP,CAF8B;AAGzC,YAAI,UAAU,QAAQ,KAAR,CAAc,IAAd,CAAV,CAHqC;AAIzC,cAAM,IAAN,CAAW,SAAX,EAAsB,OAAtB,EAJyC;OAAlB,CAAzB,EApB2C;;AA2B3C,gBAAU,eAAV,oBAA2B,aAAkB;AAC3C,YAAI,MAAM,MAAM,YAAN,CAAmB,SAAnB,CAAN,CADuC;AAE3C,cAAM,kBAAN,CAAyB,SAAzB,EAF2C;AAG3C,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,IAAI,MAAJ,EAAY,GAAhC,EAAqC;AACnC,aAAG,OAAH,CAAW,OAAX,CAAmB,IAAI,CAAJ,CAAnB,EADmC;SAArC;OAHyB,CAA3B,EA3B2C;;AAmC3C,UAAI,OAAO,MAAO,GAAG,OAAH,CAAW,GAAX,CAAe,EAAC,OAAO,KAAP,EAAhB,CAAP,CAnCgC;AAoC3C,UAAI,WAAW,QAAQ,GAAR,CAAY,IAAZ,CAAX,CApCuC;AAqC3C,YAAM,WAAN,CAAkB,SAAlB,EAA6B,QAA7B,EAAuC,SAAvC,EArC2C;KAA7C;;oBAAe;;;OAJG;;AAElB,MAAI,UAAU,IAAI,KAAJ,CAAU,EAAC,KAAK,EAAL,EAAS,WAAW,SAAX,EAAsB,KAAK,GAAL,EAA1C,CAAV,CAFc;;AA4ClB,SAAO;AACL,iCAA6B,2BAA7B;GADF,CA5CkB;CALjB,CAPH","file":"sac-compiled.js","sourcesContent":["/**\r\n * Created by lomteva.aa on 23.08.2016.\r\n */\r\ndefine([\r\n  \"./js/app/forms/forms-compiled.js\",\r\n  \"./js/app/dataAccess/model-compiled.js\",\r\n  \"./js/app/domain/http-compiled.js\",\r\n  \"./js/app/domain/dxf.js\",\r\n  \"./js/app/domain/generators-compiled.js\",\r\n  \"./js/app/domain/carto-compiled.js\"\r\n], function (forms,\r\n             model,\r\n             httpUtils,\r\n             dxfUtils,\r\n             generators,\r\n             carto) {\r\n\r\n  var context = new model({url: \"\", className: \"context\", map: map});\r\n\r\n  async function showSituationCenterMessages() {\r\n    const windowName = \"situationCenter-container\";\r\n    const tableName = \"Message-List\";\r\n    forms.toWindow(windowName, \"Сведения САЦ\");\r\n    forms.showWindow(windowName);\r\n\r\n\r\n\r\n    bindClick(\"addMessage\", async function () {\r\n      var protoFeature = generators.Message.default;\r\n      protoFeature.geometry = carto.getGpxPoint();\r\n      protoFeature.attributes.subject = userAccount.userName;\r\n      //protoFeature.attributes.createdDateTime =;\r\n      var data = await (db.Message.add(protoFeature));\r\n      var id = data[0][0].objectId;\r\n      data = await (db.Message.getById(id));\r\n      var feature = context.first(data);\r\n      forms.appendRowInTable(tableName, feature.attributes)\r\n    });\r\n\r\n    bindClick(\"editMessage\", async function () {\r\n      var objectId = forms.getObjectID(tableName);\r\n      var data = await (db.Message.getById(objectId));\r\n      var feature = context.first(data);\r\n      forms.open(\"Message\", feature);\r\n    });\r\n\r\n    bindClick(\"deleteMessage\", async function () {\r\n      var ids = forms.getObjectIDS(tableName);\r\n      forms.removeSelectedRows(tableName);\r\n      for (var i = 0; i < ids.length; i++) {\r\n        db.Message.delById(ids[i]);\r\n      }\r\n    });\r\n\r\n    var data = await (db.Message.get({where: \"1=1\"}));\r\n    var features = context.all(data);\r\n    forms.createTable(tableName, features, \"Message\");\r\n  }\r\n\r\n  return {\r\n    showSituationCenterMessages: showSituationCenterMessages\r\n  }\r\n});\r\n"]}