{"version":3,"sources":["export.js"],"names":[],"mappings":"AAAA,OACE,CACE,mCADF,CADF,EAIE,UAAU,KAAV,EAAiB;AACf,eADe;;AAEf,WAAS,SAAT,CAAmB,SAAnB,EAA8B,WAA9B,EAA2C;;AAEzC,SAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,OAAN,CAAc,MAAd,EAAsB,GAA1C,EAA+C;AAC7C,UAAI,WAAW,MAAM,OAAN,CAAc,CAAd,EAAiB,QAAjB,CAD8B;AAE7C,UAAI,KAAK,MAAM,OAAN,CAAc,CAAd,EAAiB,EAAjB,CAFoC;AAG7C,UAAI,WAAW,SAAX,CAHyC;AAI7C,UAAI;AACF,mBAAW,MAAM,iBAAN,CAAwB,OAAO,SAAP,CAAiB,EAAjB,EAAqB,SAArB,CAAxB,CAAX,CADE;OAAJ,CAGA,OAAO,CAAP,EAAU,EAAV;AAGA,WAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,SAAS,MAAT,EAAiB,GAArC,EAA0C;AACxC,YAAI,UAAU,SAAS,CAAT,CAAV,CADoC;AAExC,YAAI,QAAJ,EAAc;AACZ,cAAI,SAAS,SAAS,SAAT,CAAmB,OAAnB,CAAT,CADQ;AAEZ,cAAI,WAAW,MAAM,aAAN,CAAoB;AACjC,sBAAY,QAAQ,QAAR;AACZ,oBAAY,MAAZ;AACA,wBAAY,QAAQ,UAAR;WAHC,CAAX,CAFQ;AAOZ,cAAI,QAAJ,CAAa,GAAb,CAAiB,QAAjB,EAPY;SAAd;OAFF;KAVF;;AAyBA,UACG,SADH,CACa,EAAC,KAAK,OAAO,KAAP,CAAa,GAAb,EAAkB,WAAW,SAAX,EAAsB,aAAa,WAAb,EAD3D,EAEG,IAFH,CAGI,UAAU,MAAV,EAAkB;AAChB,YAAM,UAAN,CAAiB,cAAjB,EADgB;AAEhB,eAAS,cAAT,CAAwB,oBAAxB,EAA8C,YAA9C,CAA2D,KAA3D,EAAkE,OAAO,GAAP,CAAlE,CAFgB;KAAlB,EAIA,UAAU,GAAV,EAAe;AACb,cAAQ,GAAR,CAAY,GAAZ,EADa;KAAf,CAPJ,CA3ByC;GAA3C;;AAwCA,SAAO;AACL,eAAW,SAAX;GADF,CA1Ce;CAAjB,CAJF","file":"export-compiled.js","sourcesContent":["define(\r\n  [\r\n    \"./js/app/domain/carto-compiled.js\"\r\n  ],\r\n  function (carto) {\r\n    \"use strict\";\r\n    function exportMap(paperSize, imageFormat) {\r\n      \r\n      for (var i = 0; i < store.editors.length; i++) {\r\n        var graphics = store.editors[i].graphics;\r\n        var id = store.editors[i].id;\r\n        var renderer = undefined;\r\n        try {\r\n          renderer = carto.getUniqueRenderer(config.renderers[id][\"default\"]);\r\n        }\r\n        catch (e) {\r\n          \r\n        }\r\n        for (var j = 0; j < graphics.length; j++) {\r\n          var graphic = graphics[j];\r\n          if (renderer) {\r\n            var symbol = renderer.getSymbol(graphic);\r\n            var _graphic = carto.createGraphic({\r\n              geometry:   graphic.geometry,\r\n              symbol:     symbol,\r\n              attributes: graphic.attributes\r\n            });\r\n            map.graphics.add(_graphic);\r\n          }\r\n          \r\n        }\r\n      }\r\n      \r\n      carto\r\n        .exportMap({url: config.print.url, paperSize: paperSize, imageFormat: imageFormat})\r\n        .then(\r\n          function (result) {\r\n            forms.showWindow(\"print-result\");\r\n            document.getElementById(\"print-result-image\").setAttribute(\"src\", result.url);\r\n          },\r\n          function (err) {\r\n            console.log(err);\r\n          }\r\n        );\r\n    }\r\n    \r\n    return {\r\n      exportMap: exportMap\r\n    }\r\n  });"]}