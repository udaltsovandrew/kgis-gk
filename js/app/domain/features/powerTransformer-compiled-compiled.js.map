{"version":3,"sources":["powerTransformer-compiled.js"],"names":[],"mappings":";;;AAGA;;AAEA,OAAO,CAAC,uCAAD,EAA0C,wCAA1C,CAAP,EAA4F,UAAU,KAAV,EAAiB,UAAjB,EAA6B;;AAEvH,MAAI,UAAU,IAAI,KAAJ,CAAU,EAAE,KAAK,EAAL,EAAS,WAAW,EAAX,EAAe,KAAK,GAAL,EAApC,CAAV,CAFmH;;AAIvH,MAAI,QAAQ;AACV,UAAM;AACJ,iBAAW,kBAAX;KADF;AAGA,YAAQ;AACN,iBAAW,YAAX;KADF;GAJE,CAJmH;;AAavH,WAAS,MAAT,CAAgB,QAAhB,EAA0B;AACxB,QAAI,aAAa,EAAb,CADoB;AAExB,QAAI,qBAAqB,IAArB,CAFoB;AAGxB,WAAO,GAAG,UAAH,CAAc,OAAd,CAAsB,QAAtB,EAAgC,IAAhC,CAAqC,UAAU,IAAV,EAAgB;AAC1D,mBAAa,QAAQ,KAAR,CAAc,IAAd,CAAb,CAD0D;AAE1D,UAAI,UAAU,WAAW,gBAAX,CAA4B,OAA5B,CAF4C;AAG1D,cAAQ,QAAR,GAAmB,WAAW,QAAX,CAHuC;AAI1D,aAAO,GAAG,gBAAH,CAAoB,GAApB,CAAwB,OAAxB,CAAP,CAJ0D;KAAhB,CAArC,CAKJ,IALI,CAKC,UAAU,IAAV,EAAgB;AACtB,2BAAqB,QAAQ,OAAR,CAAgB,IAAhB,EAAsB,CAAtB,EAAyB,QAAzB,CADC;AAEtB,UAAI,YAAY,QAAQ,iBAAR,CAA0B,QAA1B,EAAoC,kBAApC,EAAwD,YAAxD,EAAsE,kBAAtE,EAA0F,WAAW,QAAX,CAAtG,CAFkB;AAGtB,aAAO,GAAG,kBAAH,CAAsB,GAAtB,CAA0B,SAA1B,CAAP,CAHsB;KAAhB,CALD,CASJ,IATI,CASC,YAAY;AAClB,aAAO,GAAG,gBAAH,CAAoB,OAApB,CAA4B,kBAA5B,CAAP,CADkB;KAAZ,CATR,CAHwB;GAA1B;;AAiBA,WAAS,IAAT,CAAc,EAAd,EAAkB;AAChB,WAAO,GAAG,gBAAH,CAAoB,OAApB,CAA4B,EAA5B,CAAP,CADgB;GAAlB;;AAIA,WAAS,MAAT,CAAgB,IAAhB,EAAsB,EAAtB;;AAEA,WAAS,GAAT,CAAa,EAAb,EAAiB;AACf,WAAO,GAAG,kBAAH,CAAsB,GAAtB,CAA0B,EAAE,OAAO,QAAQ,cAAR,CAAuB,YAAvB,EAAqC,kBAArC,EAAyD,IAAzD,EAA+D,EAA/D,CAAP,EAA5B,EAAyG,IAAzG,CAA8G,UAAU,IAAV,EAAgB;AACnI,aAAO,GAAG,kBAAH,CAAsB,OAAtB,CAA8B,QAAQ,GAAR,CAAY,QAAQ,KAAR,CAAc,IAAd,CAAZ,CAA9B,CAAP,CADmI;KAAhB,CAA9G,CAEJ,IAFI,CAEC,YAAY;AAClB,aAAO,GAAG,gBAAH,CAAoB,OAApB,CAA4B,EAA5B,CAAP,CADkB;KAAZ,CAFR,CADe;GAAjB;;AAQA,SAAO;AACL,WAAO,KAAP;AACA,YAAQ,MAAR;AACA,UAAM,IAAN;AACA,YAAQ,MAAR;AACA,SAAK,GAAL;GALF,CA5CuH;CAA7B,CAA5F","file":"powerTransformer-compiled-compiled.js","sourcesContent":["/**\n * Created by udaltsov on 30.10.15.\n */\n\"use strict\";\n\ndefine([\"./js/app/dataAccess/model-compiled.js\", \"./js/app/domain/generators-compiled.js\"], function (model, generators) {\n\n  var context = new model({ url: \"\", className: \"\", map: map });\n\n  var proto = {\n    base: {\n      className: \"PowerTransformer\"\n    },\n    parent: {\n      className: \"Substation\"\n    }\n  };\n\n  function create(parentId) {\n    var substation = {};\n    var powerTransformerId = null;\n    return db.Substation.getById(parentId).then(function (data) {\n      substation = context.first(data);\n      var feature = generators.PowerTransformer.default;\n      feature.geometry = substation.geometry;\n      return db.PowerTransformer.add(feature);\n    }).then(function (data) {\n      powerTransformerId = context.getAdds(data)[0].objectId;\n      var container = context.containerTemplate(parentId, powerTransformerId, \"Substation\", \"PowerTransformer\", substation.geometry);\n      return db.EquipmentContainer.add(container);\n    }).then(function () {\n      return db.PowerTransformer.getById(powerTransformerId);\n    });\n  }\n\n  function read(id) {\n    return db.PowerTransformer.getById(id);\n  }\n\n  function update(data) {}\n\n  function del(id) {\n    return db.EquipmentContainer.get({ where: context.containerWhere(\"Substation\", \"PowerTransformer\", null, id) }).then(function (data) {\n      return db.EquipmentContainer.delById(context.key(context.first(data)));\n    }).then(function () {\n      return db.PowerTransformer.delById(id);\n    });\n  }\n\n  return {\n    proto: proto,\n    create: create,\n    read: read,\n    update: update,\n    del: del\n  };\n});\n\n//# sourceMappingURL=powerTransformer-compiled.js.map"]}