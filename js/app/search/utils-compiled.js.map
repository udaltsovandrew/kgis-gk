{"version":3,"sources":["utils.js"],"names":[],"mappings":";;;;;AAGA,OAAO,CACH,uCADG,EAEH,6BAA2B,cAA3B,GAA0C,mBAA1C,CAFJ,EAGE,UAAU,KAAV,EACU,MADV,EACkB;;AAEhB,WAAS,mBAAT,CAA6B,GAA7B,EAAkC,IAAlC,EAAwC,KAAxC,EAA+C;AAC7C,SAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,IAAI,MAAJ,EAAY,GAAhC,EAAqC;AACnC,UAAI,IAAI,CAAJ,EAAO,IAAP,MAAiB,KAAjB,EAAwB,OAAO,IAAI,CAAJ,CAAP,CAA5B;KADF;AAGA,WAAO,EAAP,CAJ6C;GAA/C;;AAOA,SAAO;AACL;kCAAc,WAAgB,SAAhB,EAA2B,EAA3B,EAA+B,YAA/B,EAA6C;AACzD,YAAI,KAAK,EAAL,CADqD;AAEzD,WAAG,UAAH,IAAiB,IAAI,KAAJ,CAAU;AACzB,eAAK,oBAAoB,OAAO,OAAP,EAAgB,IAApC,EAA0C,UAA1C,EAAsD,KAAtD,CAAL;AACA,qBAAW,UAAX;SAFe,CAAjB,CAFyD;AAMzD,WAAG,kCAAH,IAAyC,IAAI,KAAJ,CAAU;AACjD,eAAK,oBAAoB,OAAO,OAAP,EAAgB,IAApC,EAA0C,kCAA1C,EAA8E,KAA9E,CAAL;AACA,qBAAW,kCAAX;SAFuC,CAAzC,CANyD;AAUzD,YAAI,QAAQ,sBAAsB,SAAtB,GAAkC,kDAAlC,GAAuF,EAAvF,CAV6C;AAWzD,YAAI,OAAO,MAAO,GAAG,gCAAH,CAAoC,GAApC,CAAwC,EAAC,OAAO,KAAP,EAAzC,CAAP,CAX8C;AAYzD,YAAI,aAAa,KAAK,QAAL,CAZwC;AAazD,YAAI,SAAS,WAAW,GAAX,CAAe,UAAU,IAAV,EAAgB;AAC1C,iBAAO,KAAK,UAAL,CAAgB,UAAhB,CADmC;SAAhB,CAAxB,CAbqD;AAgBzD,eAAO,MAAO,GAAG,QAAH,CAAY,UAAZ,CAAuB,MAAvB,CAAP,CAhBkD;AAiBzD,YAAI,YAAY,KAAK,QAAL,CAjByC;AAkBzD,oBAAY,UAAU,GAAV,CAAc,UAAU,IAAV,EAAgB;AACxC,cAAI,CAAC,YAAD,EAAe;AACjB,mBAAO,IAAP,CADiB;WAAnB,MAGK;AACH,gBAAI,KAAK,UAAL,CAAgB,OAAhB,KAA4B,YAA5B,EAA0C;AAC5C,qBAAO,IAAP,CAD4C;aAA9C;WAJF;SADwB,CAA1B,CAlByD;AA4BzD,eAAO,SAAP,CA5ByD;OAA7C;;;;;QAAd;GADF,CATgB;CADlB,CAHF","file":"utils-compiled.js","sourcesContent":["/**\r\n * Created by lomteva.aa on 06.05.2016.\r\n */\r\ndefine([\r\n    './js/app/dataAccess/model-compiled.js',\r\n    '../../../../Application/'+_currentServer+'/config/config.js'],\r\n  function (model,\r\n            config) {\r\n\r\n    function getElementFromArray(arr, prop, value) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i][prop] === value) return arr[i];\r\n      }\r\n      return {};\r\n    }\r\n\r\n    return {\r\n      getDocuments: async function (className, id, documentType) {\r\n        var db = {};\r\n        db[\"Document\"] = new model({\r\n          url: getElementFromArray(config.editors, \"id\", \"Document\")[\"url\"],\r\n          className: \"Document\"\r\n        });\r\n        db[\"DocumentIdentificationObjectRole\"] = new model({\r\n          url: getElementFromArray(config.editors, \"id\", \"DocumentIdentificationObjectRole\")[\"url\"],\r\n          className: \"DocumentIdentificationObjectRole\"\r\n        });\r\n        var where = \"parentClassName='\" + className + \"' AND chieldClassName='Document' AND parentMRID=\" + id;\r\n        var data = await (db.DocumentIdentificationObjectRole.get({where: where}));\r\n        var containers = data.features;\r\n        var docIds = containers.map(function (item) {\r\n          return item.attributes.chieldMRID\r\n        });\r\n        data = await (db.Document.getByArray(docIds));\r\n        var documents = data.features;\r\n        documents = documents.map(function (item) {\r\n          if (!documentType) {\r\n            return item;\r\n          }\r\n          else {\r\n            if (item.attributes.docType === documentType) {\r\n              return item;\r\n            }\r\n          }\r\n        });\r\n        return documents;\r\n      }\r\n    }\r\n  });"]}