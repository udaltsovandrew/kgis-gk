{"version":3,"sources":["plugins.js"],"names":[],"mappings":"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","file":"plugins-compiled.js","sourcesContent":["/**\r\n * Created by lomteva.aa on 26.04.2016.\r\n */\r\ndefine([\"./js/app/forms/forms-compiled.js\",\r\n  './js/app/search/utils-compiled.js'],\r\n  function (forms,\r\n            searchUtils) {\r\n  return {\r\n    links: {\r\n      \"map\": {\r\n        text: \"Карта\",\r\n        image: \"\",\r\n        /**\r\n         * @param data\r\n         * @param data.parentElementName\r\n         * @param data.feature\r\n         * @param data.className\r\n         * @param data.carto\r\n         */\r\n        generate: function (data) {\r\n          \"use strict\";\r\n          var parentElementName = data.parentElementName;\r\n          var feature = data.feature;\r\n          var className = feature.className;\r\n          var id = feature.attributes.OBJECTID;\r\n          var carto = data.carto;\r\n          var mapDivName = \"map-\" + className + \"-\" + id;\r\n          var linkDivName = \"link-map-\" + className + \"-\" + id;\r\n          var parentElement = $(\"#\" + parentElementName)[0];\r\n          var linksContainerName = \"links-container-\" + className + \"-\" + id;\r\n          var linksContainer = $(\"#\" + linksContainerName)[0];\r\n          linksContainer.innerHTML += \"<a class=links id='\" + linkDivName + \"' href='#'><span class='glyphicon glyphicon-search'></span> Показать на карте</a>\";\r\n          parentElement.innerHTML += \"<div id='\" + mapDivName + \"'></div>\";\r\n          setTimeout(function () {\r\n            var map = null;\r\n            var status = false;\r\n            bindClick(linkDivName, function () {\r\n              var docsContainerName = \"docs-container-\" + className + \"-\" + id;\r\n              forms.hideNode(docsContainerName);\r\n              if (map === null) {\r\n                map = carto.createMap(mapDivName, {\r\n                  basemap: \"osm\"\r\n                });\r\n                map.on(\"load\", function () {\r\n                  carto.addGraphicToMap(map, feature, undefined, true, 17);\r\n                });\r\n\r\n              }\r\n              if (status) {\r\n                forms.hideNode(mapDivName);\r\n              }\r\n              else {\r\n                forms.showNode(mapDivName);\r\n              }\r\n              status = !status;\r\n            })\r\n          }, 50);\r\n\r\n        }\r\n      },\r\n      \"passport\": {\r\n        text: \"Паспорт\",\r\n        image: \"images/search/Ico_pas.png\",\r\n        generate: function (data) {\r\n          \"use strict\";\r\n          var feature = data.feature;\r\n          var className = feature.className;\r\n          var id = feature.attributes.OBJECTID;\r\n          var linksContainerName = \"links-container-\" + className + \"-\" + id;\r\n          var linkDivName = \"link-passport-\" + className + \"-\" + id;\r\n          var docsContainerName = \"docs-container-\" + className + \"-\" + id;\r\n          var linksContainer = $(\"#\" + linksContainerName)[0];\r\n          var image = this.image;\r\n          var text = this.text;\r\n          linksContainer.innerHTML += \"<a class=links id='\" + linkDivName + \"' href='#'><img src='\" + image + \"'> \" + text + \"</a>\"\r\n          setTimeout(function () {\r\n            var status = false;\r\n            bindClick(linkDivName, async function () {\r\n              var docsContainer = document.getElementById(docsContainerName);\r\n              docsContainer.innerHTML = '';\r\n              var documents = await(searchUtils.getDocuments(className, id,\"паспорт\"));\r\n              if (documents.length == 0) {\r\n                docsContainer.innerHTML += \"Нет прикрепленных паспортов\";\r\n              } else {\r\n                var table = document.createElement('table');\r\n                table.setAttribute('class','table table-bordered');\r\n                table.innerHTML += \"<thead><tr><th>Наименование</th><th>Тип</th><th>Дата создания</th></tr></thead><tbody></tbody>\";\r\n                for (var i = 0; i < documents.length; i++) {\r\n                  if(documents[i]){\r\n                    var docName = documents[i].attributes.name;\r\n                    var docType = documents[i].attributes.docType;\r\n                    var date = documents[i].attributes.createdDateTime;\r\n                    var docDate=moment(date).format(\"DD.MM.YYYY hh:mm\");\r\n                    table.childNodes[1].innerHTML += \"<tr><td><a href='http://vm.igit.spb.ru/lenenergo/documents//\"+className+\"/\"+id+\"/\"+docName+\"' target='_blank'>\" + docName + \"</a></td><td>\" + docType + \"</td><td>\" + docDate + \"</td></tr>\"\r\n                  }\r\n                }\r\n                docsContainer.appendChild(table)\r\n              }\r\n              if (status) {\r\n                forms.hideNode(docsContainerName);\r\n              }\r\n              else {\r\n                forms.showNode(docsContainerName);\r\n              }\r\n              status = !status;\r\n            })\r\n          }, 100)\r\n        }\r\n      },\r\n      \"documents\": {\r\n        text: \"Документы\",\r\n        image: \"images/search/ico_doc.png\",\r\n        generate: async function (data) {\r\n          \"use strict\";\r\n          var parentElementName = data.parentElementName;\r\n          var feature = data.feature;\r\n          var className = feature.className;\r\n          var id = feature.attributes.OBJECTID;\r\n          var linksContainerName = \"links-container-\" + className + \"-\" + id;\r\n          var linkDivName = \"link-documents-\" + className + \"-\" + id;\r\n          var docsContainerName = \"docs-container-\" + className + \"-\" + id;\r\n          var linksContainer = $(\"#\" + linksContainerName)[0];\r\n          var image = this.image;\r\n          var text = this.text;\r\n          linksContainer.innerHTML += \"<a class=links id='\" + linkDivName + \"' href='#'><img src='\" + image + \"'> \" + text + \"</a>\";\r\n          setTimeout(function () {\r\n            var status = false;\r\n            bindClick(linkDivName, async function () {\r\n              var docsContainer = document.getElementById(docsContainerName);\r\n              docsContainer.innerHTML = '';\r\n              var documents = await(searchUtils.getDocuments(className, id));\r\n              if (documents.length == 0) {\r\n                docsContainer.innerHTML += \"Нет прикрепленных документов\";\r\n              } else {\r\n                var table = document.createElement('table');\r\n                table.setAttribute('class','table table-bordered');\r\n                table.innerHTML += \"<thead><tr><th>Наименование</th><th>Тип</th><th>Дата создания</th></tr></thead><tbody></tbody>\";\r\n                for (var i = 0; i < documents.length; i++) {\r\n                  var docName = documents[i].attributes.name;\r\n                  var docType = documents[i].attributes.docType;\r\n                  var date = documents[i].attributes.createdDateTime;\r\n                  var docDate=moment(date).format(\"DD.MM.YYYY hh:mm\");\r\n                  table.childNodes[1].innerHTML += \"<tr><td><a href='http://vm.igit.spb.ru/lenenergo/documents//\"+className+\"/\"+id+\"/\"+docName+\"' target='_blank'>\" + docName + \"</a></td><td>\" + docType + \"</td><td>\" + docDate + \"</td></tr>\"\r\n                }\r\n                docsContainer.appendChild(table)\r\n              }\r\n              if (status) {\r\n                forms.hideNode(docsContainerName);\r\n              }\r\n              else {\r\n                forms.showNode(docsContainerName);\r\n              }\r\n              status = !status;\r\n            })\r\n          }, 100)\r\n\r\n        }\r\n      },\r\n      \"layout\": {\r\n        text: \"Схема\",\r\n        image: \"images/search/ico_lay.png\",\r\n        generate: function (data) {\r\n          \"use strict\";\r\n          var feature = data.feature;\r\n          var className = feature.className;\r\n          var id = feature.attributes.OBJECTID;\r\n          var linksContainerName = \"links-container-\" + className + \"-\" + id;\r\n          var linkDivName = \"link-layout-\" + className + \"-\" + id;\r\n          var docsContainerName = \"docs-container-\" + className + \"-\" + id;\r\n          var linksContainer = $(\"#\" + linksContainerName)[0];\r\n          var image = this.image;\r\n          var text = this.text;\r\n          linksContainer.innerHTML += \"<a class=links id='\" + linkDivName + \"' href='#'><img src='\" + image + \"'> \" + text + \"</a>\"\r\n          setTimeout(function () {\r\n            var status = false;\r\n            bindClick(linkDivName, async function () {\r\n              var docsContainer = document.getElementById(docsContainerName);\r\n              docsContainer.innerHTML = '';\r\n              var documents = await(searchUtils.getDocuments(className, id,\"схема электрических соединений\"))\r\n              if (documents.length==0) {\r\n                docsContainer.innerHTML += \"Нет прикрепленных схем\"\r\n              } else {\r\n                var table = document.createElement('table');\r\n                table.setAttribute('class','table table-bordered');\r\n                table.innerHTML += \"<thead><tr><th>Наименование</th><th>Тип</th><th>Дата создания</th></tr></thead><tbody></tbody>\";\r\n                for (var i = 0; i < documents.length; i++) {\r\n                  if(documents[i]){\r\n                    var docName = documents[i].attributes.name;\r\n                    var docType = documents[i].attributes.docType;\r\n                    var date = documents[i].attributes.createdDateTime;\r\n                    var docDate=moment(date).format(\"DD.MM.YYYY hh:mm\");\r\n                    table.childNodes[1].innerHTML += \"<tr><td><a href='http://vm.igit.spb.ru/lenenergo/documents//\"+className+\"/\"+id+\"/\"+docName+\"' target='_blank'>\" + docName + \"</a></td><td>\" + docType + \"</td><td>\" + docDate + \"</td></tr>\"\r\n                  }\r\n                }\r\n                docsContainer.appendChild(table)\r\n              }\r\n              if (status) {\r\n                forms.hideNode(docsContainerName);\r\n              }\r\n              else {\r\n                forms.showNode(docsContainerName);\r\n              }\r\n              status = !status;\r\n            })\r\n          }, 100)        }\r\n      },\r\n      \"contacts\": {\r\n        text: \"Контакты\",\r\n        image: \"images/search/ico_con.png\",\r\n        generate: function (data) {\r\n          \"use strict\";\r\n          var feature = data.feature;\r\n          var className = feature.className;\r\n          var id = feature.attributes.OBJECTID;\r\n          var linksContainerName = \"links-container-\" + className + \"-\" + id;\r\n          var linkDivName = \"link-contacts-\" + className + \"-\" + id;\r\n          var linksContainer = $(\"#\" + linksContainerName)[0];\r\n          var image = this.image;\r\n          var text = this.text;\r\n          linksContainer.innerHTML += \"<a class=links id='\" + linkDivName + \"' href='#'><img src='\" + image + \"'> \" + text + \"</a>\"\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n});\r\n"]}