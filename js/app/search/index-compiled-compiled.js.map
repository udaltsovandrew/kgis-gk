{"version":3,"sources":["index-compiled.js"],"names":[],"mappings":"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","file":"index-compiled-compiled.js","sourcesContent":["function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/**\n * Created by lomteva.aa on 01.04.2016.\n */\nfunction search() {\n  require(['./js/app/dataAccess/model-compiled.js', './js/app/search/config.js', './js/app/search/plugins-compiled.js', './js/app/domain/carto-compiled.js'], function (model, config, plugins, carto) {\n    let doSearch = (() => {\n      var ref = _asyncToGenerator(function* () {\n        var mapCollection = {};\n        currentPageNumber = 0;\n\n        var inputValue = document.getElementById(\"searchInput\").value;\n        /**\n         * Создание моделей для доступа к БД (сервисам)\n         */\n        var db = initDB({});\n        /**\n         * Массив источников поиска (вспомогательная переменная - [\"Substation\", \"PowerLine\", ..., \"Class4\"]\n         */\n        var classes = config.sources.map(function (item) {\n          return item.id;\n        });\n        /**\n         * Массив асинхронных запросов к источникам с характерными для каждого источника запросами\n         */\n        var requests = classes.map((() => {\n          var ref = _asyncToGenerator(function* (item) {\n            var fields = getElementFromArray(config.sources, \"id\", item)[\"fields\"];\n            var where = fields.join(\" LIKE '%\" + inputValue + \"%' OR \") + \" LIKE '%\" + inputValue + \"%'\";\n            return yield db[item].get({ where: where, num: getElementFromArray(config.sources, \"id\", item)[\"num\"] });\n          });\n\n          return function (_x) {\n            return ref.apply(this, arguments);\n          };\n        })());\n\n        /**\n         * Обещание подождать пока все запросы не придут\n         * @type {Promise}\n         */\n        var results = [];\n        try {\n          results = yield Promise.all(requests);\n        } catch (e) {\n          results = [];\n        }\n\n        /**\n         * Массив для складывания результатов\n         * @type {Array}\n         */\n        var features = [];\n        for (var i = 0; i < classes.length; i++) {\n          for (var j = 0; j < results[i].features.length; j++) {\n            var feature = results[i].features[j];\n            feature.className = classes[i];\n            features.push(feature);\n          }\n        }\n        /**\n         * Магичекие действия с длинами массивов и размерами страниц\n         * @type {Number}\n         */\n        if (features.length == 0) {\n          var searchResults = document.getElementById(\"search-results\");\n          var pagerContainer = document.getElementById(\"pager-container\");\n          searchResults.innerHTML = \"Ничего не найдено\";\n          clearContent(pagerContainer);\n        } else {\n          var searchResults = document.getElementById(\"search-results\");\n          clearContent(searchResults);\n          var numberFeatures = features.length;\n          var featuresPerPage = 10;\n          var numberPages = Math.ceil(numberFeatures / featuresPerPage);\n\n          lists = splitForLists(features, featuresPerPage);\n          createPager(numberPages, 5);\n          setContent(lists[0]);\n        }\n      });\n\n      return function doSearch() {\n        return ref.apply(this, arguments);\n      };\n    })();\n\n    var lists = [];\n    var currentPageNumber = 0;\n    var firstPage = 0;\n    var lastPage = 0;\n    var searchButton = document.getElementById('searchButton');\n    searchButton.onclick = doSearch;\n    var searchInput = document.getElementById(\"searchInput\");\n    searchInput.onkeypress = keyPress;\n\n    function splitForLists(features, featuresPerPage) {\n      var i = 0;\n      var n = features.length;\n      var lists = [];\n      while (i < n) {\n        lists.push(features.slice(i, i += featuresPerPage));\n      }\n\n      return lists;\n    }\n\n    function keyPress(e) {\n      var searchButton = document.getElementById('searchButton');\n      if (e.keyCode === 13) {\n        doSearch();\n        return false;\n      }\n    };\n\n    ;\n\n    function initDB(database) {\n      for (var i = 0; i < config.sources.length; i++) {\n        database[config.sources[i].id] = new model({\n          className: config.sources[i].id,\n          url: config.sources[i].url\n        });\n      }\n      return database;\n    }\n\n    function getElementFromArray(arr, prop, value) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i][prop] === value) return arr[i];\n      }\n      return {};\n    }\n\n    function createPager(numberPages, maxNumberPages) {\n      var pagerContainer = document.getElementById(\"pager-container\");\n      pagerContainer.innerHTML = \"\";\n      var pager = document.createElement('nav');\n      var pagerButtons = document.createElement('ul');\n      pagerButtons.setAttribute('class', 'pagination sm');\n      pagerButtons.innerHTML += \"<li id='page-previous' class=''><a href='#'>Предыдущая</a></li>\";\n      for (var i = 0; i < numberPages; i++) {\n        if (i < maxNumberPages) {\n          pagerButtons.innerHTML += \"<li id='page-\" + i + \"'><a href='#'>\" + (i + 1) + \"</a></li>\";\n        } else {\n          pagerButtons.innerHTML += \"<li style='display:none' id='page-\" + i + \"'><a href='#'>\" + (i + 1) + \"</a></li>\";\n        }\n      }\n      pagerButtons.innerHTML += \"<li id='page-next' class=''><a href='#'>Следующая</a></li>\";\n      pager.appendChild(pagerButtons);\n      pagerContainer.appendChild(pager);\n      var activePage = document.getElementById(\"page-0\");\n      activePage.setAttribute('class', 'active');\n      var searchResults = document.getElementById(\"search-results\");\n      var previousButton = document.getElementById(\"page-previous\");\n      var nextButton = document.getElementById(\"page-next\");\n      if (currentPageNumber === numberPages - 1) {\n        nextButton.setAttribute('class', 'disabled');\n      }\n      if (currentPageNumber === 0) {\n        previousButton.setAttribute('class', 'disabled');\n      }\n\n      lastPage = maxNumberPages - 1;\n\n      bindClick(\"page-next\", function () {\n        \"use strict\";\n\n        currentPageNumber++;\n        if (currentPageNumber >= numberPages - 1) {\n          currentPageNumber = numberPages - 1;\n        }\n        clearContent(searchResults);\n        setContent(lists[currentPageNumber]);\n        if (currentPageNumber === lastPage) {\n          lastPage = lastPage + 2;\n          firstPage = firstPage + 2;\n          if (lastPage > numberPages - 1) {\n            var difference = lastPage - (numberPages - 1);\n            lastPage = lastPage - difference;\n            firstPage = firstPage - difference;\n          }\n          changePager(firstPage, lastPage, numberPages);\n        }\n\n        setActivePage(currentPageNumber, numberPages);\n        previousButton.removeAttribute('class');\n        if (currentPageNumber === numberPages - 1) {\n          nextButton.setAttribute('class', 'disabled');\n        } else {\n          nextButton.removeAttribute('class');\n        }\n      });\n      bindClick(\"page-previous\", function () {\n        \"use strict\";\n\n        currentPageNumber--;\n        if (currentPageNumber === -1) {\n          currentPageNumber = 0;\n        }\n        clearContent(searchResults);\n        setContent(lists[currentPageNumber]);\n        if (currentPageNumber === firstPage) {\n          lastPage = lastPage - 2;\n          firstPage = firstPage - 2;\n          if (firstPage < 0) {\n            lastPage = lastPage - firstPage;\n            firstPage = 0;\n          }\n          changePager(firstPage, lastPage, numberPages);\n        }\n        setActivePage(currentPageNumber, numberPages);\n        nextButton.removeAttribute('class');\n        if (currentPageNumber === 0) {\n          previousButton.setAttribute('class', 'disabled');\n        } else {\n          previousButton.removeAttribute('class');\n        }\n      });\n      for (let i = 0; i < numberPages; i++) {\n        bindClick(\"page-\" + i, function () {\n          clearContent(searchResults);\n          setContent(lists[i]);\n          currentPageNumber = i;\n          if (currentPageNumber === firstPage) {\n            lastPage = lastPage - 2;\n            firstPage = firstPage - 2;\n            if (firstPage < 0) {\n              lastPage = lastPage - firstPage;\n              firstPage = 0;\n            }\n            changePager(firstPage, lastPage, numberPages);\n          }\n          if (currentPageNumber === lastPage) {\n            lastPage = lastPage + 2;\n            firstPage = firstPage + 2;\n            if (lastPage > numberPages - 1) {\n              var difference = lastPage - (numberPages - 1);\n              lastPage = lastPage - difference;\n              firstPage = firstPage - difference;\n            }\n            changePager(firstPage, lastPage, numberPages);\n          }\n          setActivePage(currentPageNumber, numberPages);\n          if (currentPageNumber === numberPages - 1) {\n            nextButton.setAttribute('class', 'disabled');\n          } else {\n            nextButton.removeAttribute('class');\n          }\n          if (currentPageNumber === 0) {\n            previousButton.setAttribute('class', 'disabled');\n          } else {\n            previousButton.removeAttribute('class');\n          }\n        });\n      }\n    }\n\n    function setContent(list) {\n      for (var i = 0; i < list.length; i++) {\n        var feature = list[i];\n        var className = list[i].className;\n        var content = createDIV(className, feature);\n        var searchResults = document.getElementById(\"search-results\");\n        searchResults.innerHTML += content;\n        var links = getElementFromArray(config.sources, \"id\", className)[\"links\"];\n        links.forEach(function (item) {\n          \"use strict\";\n\n          var plugin = plugins.links[item];\n          plugin.generate({\n            parentElementName: className + \"-\" + feature.attributes.OBJECTID,\n            feature: feature,\n            className: className,\n            carto: carto\n          });\n        });\n      }\n    }\n\n    function createDIV(className, feature) {\n      var configElement = getElementFromArray(config.sources, \"id\", className);\n      var div = configElement.divTemplate(feature);\n      return div;\n    }\n\n    function clearContent(div) {\n      div.innerHTML = \"\";\n    }\n\n    function setActivePage(currentPageNumber, numberPages) {\n      for (let i = 0; i < numberPages; i++) {\n        var pageNumber = \"page-\" + i;\n        var page = document.getElementById(pageNumber);\n        if (page.hasAttribute('class')) {\n          page.removeAttribute('class');\n        }\n      }\n      var activePage = document.getElementById(\"page-\" + currentPageNumber);\n      activePage.setAttribute('class', 'active');\n    }\n    function changePager(firstPage, lastPage, numberPages) {\n      for (var i = 0; i < numberPages; i++) {\n        var pageNumber = \"page-\" + i;\n        var page = document.getElementById(pageNumber);\n        if (firstPage <= i <= lastPage) {\n          if (page.hasAttribute('style')) {\n            page.removeAttribute('style');\n          }\n        }\n        if (i < firstPage || i > lastPage) {\n          page.setAttribute('style', 'display:none');\n        }\n      }\n    }\n  });\n}\n\n//# sourceMappingURL=index-compiled.js.map"]}