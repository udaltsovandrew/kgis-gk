{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/**\r\n * Created by lomteva.aa on 01.04.2016.\r\n */\r\nfunction search() {\r\n  require([\r\n    './js/app/dataAccess/model-compiled.js',\r\n    './js/app/search/config.js',\r\n    './js/app/search/plugins-compiled.js',\r\n    './js/app/domain/carto-compiled.js'\r\n  ], function (model,\r\n               config,\r\n               plugins,\r\n               carto) {\r\n\r\n    var lists = [];\r\n    var currentPageNumber = 0;\r\n    var firstPage=0;\r\n    var lastPage=0;\r\n    var searchButton=document.getElementById('searchButton');\r\n    searchButton.onclick=doSearch;\r\n    var searchInput=document.getElementById(\"searchInput\");\r\n    searchInput.onkeypress=keyPress;\r\n\r\n    function splitForLists(features, featuresPerPage) {\r\n      var i = 0;\r\n      var n = features.length;\r\n      var lists = [];\r\n      while (i < n) {\r\n        lists.push(features.slice(i, i += featuresPerPage));\r\n      }\r\n\r\n      return lists;\r\n    }\r\n\r\n    function keyPress(e){\r\n      var searchButton=document.getElementById('searchButton');\r\n      if(e.keyCode===13){\r\n        doSearch();\r\n        return false;\r\n      }\r\n    }\r\n    async function doSearch () {\r\n      var mapCollection = {};\r\n      currentPageNumber = 0;\r\n\r\n      var inputValue = document.getElementById(\"searchInput\").value;\r\n      /**\r\n       * Создание моделей для доступа к БД (сервисам)\r\n       */\r\n      var db = initDB({});\r\n      /**\r\n       * Массив источников поиска (вспомогательная переменная - [\"Substation\", \"PowerLine\", ..., \"Class4\"]\r\n       */\r\n      var classes = config.sources.map(function (item) {\r\n        return item.id;\r\n      });\r\n      /**\r\n       * Массив асинхронных запросов к источникам с характерными для каждого источника запросами\r\n       */\r\n      var requests = classes.map(async function (item) {\r\n        var fields = getElementFromArray(config.sources, \"id\", item)[\"fields\"];\r\n        var where = fields.join(\" LIKE '%\" + inputValue + \"%' OR \") + \" LIKE '%\" + inputValue + \"%'\";\r\n        return await db[item].get({where: where, num: getElementFromArray(config.sources, \"id\", item)[\"num\"]});\r\n      });\r\n\r\n      /**\r\n       * Обещание подождать пока все запросы не придут\r\n       * @type {Promise}\r\n       */\r\n      var results = [];\r\n      try{\r\n       results = await Promise.all(requests);\r\n      }\r\n      catch(e){\r\n        results = [];\r\n      }\r\n\r\n      /**\r\n       * Массив для складывания результатов\r\n       * @type {Array}\r\n       */\r\n      var features = [];\r\n      for (var i = 0; i < classes.length; i++) {\r\n        for (var j = 0; j < results[i].features.length; j++) {\r\n          var feature = results[i].features[j];\r\n          feature.className = classes[i];\r\n          features.push(feature);\r\n        }\r\n      }\r\n      /**\r\n       * Магичекие действия с длинами массивов и размерами страниц\r\n       * @type {Number}\r\n       */\r\n      if (features.length == 0) {\r\n        var searchResults = document.getElementById(\"search-results\");\r\n        var pagerContainer = document.getElementById(\"pager-container\");\r\n        searchResults.innerHTML = \"Ничего не найдено\";\r\n        clearContent(pagerContainer);\r\n\r\n      } else {\r\n        var searchResults = document.getElementById(\"search-results\");\r\n        clearContent(searchResults);\r\n        var numberFeatures = features.length;\r\n        var featuresPerPage = 10;\r\n        var numberPages = Math.ceil(numberFeatures / featuresPerPage);\r\n\r\n        lists = splitForLists(features, featuresPerPage);\r\n        createPager(numberPages,5);\r\n        setContent(lists[0]);\r\n\r\n      }\r\n    }\r\n    function initDB(database) {\r\n      for (var i = 0; i < config.sources.length; i++) {\r\n        database[config.sources[i].id] = new model({\r\n          className: config.sources[i].id,\r\n          url:       config.sources[i].url\r\n        })\r\n      }\r\n      return database;\r\n    }\r\n\r\n    function getElementFromArray(arr, prop, value) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i][prop] === value) return arr[i];\r\n      }\r\n      return {};\r\n    }\r\n\r\n    function createPager(numberPages, maxNumberPages) {\r\n      var pagerContainer = document.getElementById(\"pager-container\");\r\n      pagerContainer.innerHTML = \"\";\r\n      var pager = document.createElement('nav');\r\n      var pagerButtons = document.createElement('ul');\r\n      pagerButtons.setAttribute ('class', 'pagination sm');\r\n      pagerButtons.innerHTML += \"<li id='page-previous' class=''><a href='#'>Предыдущая</a></li>\";\r\n      for (var i = 0; i < numberPages; i++) {\r\n        if (i<maxNumberPages){\r\n          pagerButtons.innerHTML += \"<li id='page-\" + i + \"'><a href='#'>\" + (i+1) + \"</a></li>\"\r\n        }else{\r\n          pagerButtons.innerHTML += \"<li style='display:none' id='page-\" + i + \"'><a href='#'>\" + (i+1) + \"</a></li>\"\r\n        }\r\n      }\r\n      pagerButtons.innerHTML += \"<li id='page-next' class=''><a href='#'>Следующая</a></li>\";\r\n      pager.appendChild(pagerButtons);\r\n      pagerContainer.appendChild(pager);\r\n      var activePage=document.getElementById(\"page-0\");\r\n      activePage.setAttribute('class','active');\r\n      var searchResults = document.getElementById(\"search-results\");\r\n      var previousButton = document.getElementById(\"page-previous\");\r\n      var nextButton = document.getElementById(\"page-next\");\r\n      if (currentPageNumber === (numberPages - 1)) {\r\n        nextButton.setAttribute('class','disabled')\r\n      }\r\n      if (currentPageNumber === 0) {\r\n        previousButton.setAttribute('class','disabled')\r\n      }\r\n\r\n      lastPage=(maxNumberPages-1);\r\n\r\n\r\n      bindClick(\"page-next\", function () {\r\n        \"use strict\";\r\n        currentPageNumber++;\r\n        if (currentPageNumber >= (numberPages - 1)) {\r\n          currentPageNumber = numberPages - 1;\r\n        }\r\n        clearContent(searchResults);\r\n        setContent(lists[currentPageNumber]);\r\n        if (currentPageNumber === lastPage) {\r\n          lastPage = lastPage + 2;\r\n          firstPage = firstPage + 2;\r\n          if (lastPage > (numberPages - 1)) {\r\n            var difference =lastPage-(numberPages - 1);\r\n            lastPage = lastPage - difference;\r\n            firstPage = firstPage - difference;\r\n          }\r\n          changePager(firstPage, lastPage, numberPages);\r\n        }\r\n\r\n        setActivePage(currentPageNumber, numberPages);\r\n        previousButton.removeAttribute('class');\r\n        if (currentPageNumber === (numberPages - 1)) {\r\n          nextButton.setAttribute('class','disabled')\r\n        }else{\r\n          nextButton.removeAttribute('class')\r\n        }\r\n\r\n        }\r\n      );\r\n      bindClick(\"page-previous\", function () {\r\n        \"use strict\";\r\n        currentPageNumber--;\r\n        if (currentPageNumber === -1) {\r\n          currentPageNumber = 0;\r\n        }\r\n        clearContent(searchResults);\r\n        setContent(lists[currentPageNumber]);\r\n        if (currentPageNumber === firstPage) {\r\n          lastPage = lastPage - 2;\r\n          firstPage = firstPage - 2;\r\n          if (firstPage <0) {\r\n            lastPage = lastPage - firstPage;\r\n            firstPage = 0;\r\n          }\r\n          changePager(firstPage, lastPage, numberPages);\r\n        }\r\n        setActivePage(currentPageNumber, numberPages);\r\n        nextButton.removeAttribute('class');\r\n        if (currentPageNumber === 0) {\r\n          previousButton.setAttribute('class','disabled')\r\n        }else{\r\n          previousButton.removeAttribute('class')\r\n        }\r\n      });\r\n      for (let i = 0; i < numberPages; i++) {\r\n        bindClick(\"page-\" + i, function () {\r\n          clearContent(searchResults);\r\n          setContent(lists[i]);\r\n          currentPageNumber = i;\r\n          if (currentPageNumber === firstPage) {\r\n            lastPage = lastPage - 2;\r\n            firstPage = firstPage - 2;\r\n            if (firstPage <0) {\r\n              lastPage = lastPage - firstPage;\r\n              firstPage = 0;\r\n            }\r\n            changePager(firstPage, lastPage, numberPages);\r\n          }\r\n          if (currentPageNumber === lastPage) {\r\n            lastPage = lastPage + 2;\r\n            firstPage = firstPage + 2;\r\n            if (lastPage > (numberPages - 1)) {\r\n              var difference =lastPage-(numberPages - 1);\r\n              lastPage = lastPage - difference;\r\n              firstPage = firstPage - difference;\r\n            }\r\n            changePager(firstPage, lastPage, numberPages);\r\n          }\r\n          setActivePage(currentPageNumber, numberPages);\r\n          if (currentPageNumber === (numberPages - 1)) {\r\n            nextButton.setAttribute('class', 'disabled')\r\n          } else {\r\n            nextButton.removeAttribute('class')\r\n          }\r\n          if (currentPageNumber === 0) {\r\n            previousButton.setAttribute('class', 'disabled')\r\n          } else {\r\n            previousButton.removeAttribute('class')\r\n          }\r\n        });\r\n\r\n\r\n\r\n      }\r\n    }\r\n\r\n    function setContent(list) {\r\n      for (var i = 0; i < list.length; i++) {\r\n        var feature = list[i];\r\n        var className = list[i].className;\r\n        var content = createDIV(className, feature);\r\n        var searchResults = document.getElementById(\"search-results\");\r\n        searchResults.innerHTML += content;\r\n        var links = getElementFromArray(config.sources, \"id\", className)[\"links\"];\r\n        links.forEach(function (item) {\r\n          \"use strict\";\r\n          var plugin = plugins.links[item];\r\n          plugin.generate({\r\n            parentElementName: className + \"-\" + feature.attributes.OBJECTID,\r\n            feature:           feature,\r\n            className:         className,\r\n            carto:             carto\r\n          });\r\n\r\n        })\r\n\r\n      }\r\n    }\r\n\r\n    function createDIV(className, feature) {\r\n      var configElement = getElementFromArray(config.sources, \"id\", className);\r\n      var div = configElement.divTemplate(feature);\r\n      return div;\r\n    }\r\n\r\n    function clearContent(div) {\r\n      div.innerHTML = \"\"\r\n    }\r\n\r\n    function setActivePage(currentPageNumber, numberPages) {\r\n      for (let i = 0; i < numberPages; i++) {\r\n          var pageNumber = \"page-\" +i;\r\n          var page = document.getElementById(pageNumber);\r\n        if (page.hasAttribute('class')){\r\n          page.removeAttribute('class');\r\n        }\r\n      }\r\n      var activePage = document.getElementById(\"page-\" + currentPageNumber);\r\n      activePage.setAttribute('class', 'active');\r\n    }\r\n    function changePager(firstPage,lastPage,numberPages){\r\n      for(var i=0;i<numberPages;i++){\r\n        var pageNumber = \"page-\" +i;\r\n        var page=document.getElementById(pageNumber);\r\n        if (firstPage<=i<=lastPage){\r\n          if(page.hasAttribute('style')){\r\n            page.removeAttribute('style');\r\n          }\r\n        }\r\n        if(i<firstPage||i>lastPage) {\r\n          page.setAttribute('style','display:none');\r\n        }\r\n      }\r\n    }\r\n\r\n  })\r\n}\r\n"]}